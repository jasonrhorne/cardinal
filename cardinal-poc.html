<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cardinal POC</title>
    <style>
        body {
            font-family: system-ui, -apple-system, sans-serif;
            max-width: 800px;
            margin: 40px auto;
            padding: 0 20px;
            line-height: 1.6;
            color: #333;
        }
        
        h1 {
            font-size: 24px;
            font-weight: 500;
            margin-bottom: 30px;
        }
        
        .section {
            margin-bottom: 25px;
            padding-bottom: 25px;
            border-bottom: 1px solid #e0e0e0;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-size: 14px;
            color: #666;
        }
        
        input, select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
            margin-bottom: 10px;
        }
        
        .interests {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }
        
        .interest-option {
            display: flex;
            align-items: center;
            font-size: 14px;
        }
        
        .interest-option input {
            width: auto;
            margin-right: 8px;
            margin-bottom: 0;
        }
        
        button {
            background: #000;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }
        
        button:hover {
            background: #333;
        }
        
        button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        
        .output {
            margin-top: 40px;
            padding: 20px;
            background: #f5f5f5;
            border-radius: 4px;
            white-space: pre-wrap;
            font-size: 14px;
            display: none;
        }
        
        .output.active {
            display: block;
        }
        
        .loading {
            display: none;
            color: #666;
            font-style: italic;
        }
        
        .loading.active {
            display: block;
        }
        
        .children-inputs {
            margin-left: 20px;
            margin-top: 10px;
        }
        
        .child-age {
            display: flex;
            align-items: center;
            margin-bottom: 5px;
        }
        
        .child-age input {
            width: 60px;
            margin: 0 10px;
        }
        
        h2 {
            font-size: 18px;
            margin-top: 30px;
            margin-bottom: 15px;
        }
        
        .destination-card {
            background: white;
            padding: 15px;
            margin-bottom: 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        .destination-card h3 {
            margin: 0 0 10px 0;
            font-size: 16px;
        }
        
        .destination-card p {
            margin: 5px 0;
            font-size: 14px;
            color: #666;
        }
        
        .select-destination {
            margin-top: 10px;
            padding: 5px 15px;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <h1>Cardinal - Weekend Trip Planner POC</h1>
    
    <div class="section">
        <label>Origin (City, State)</label>
        <input type="text" id="origin" placeholder="e.g., Pittsburgh, PA" value="Pittsburgh, PA">
    </div>
    
    <div class="section">
        <label>Number of Adults</label>
        <input type="number" id="adults" min="1" value="2">
        
        <label>Number of Children</label>
        <input type="number" id="children" min="0" value="0" onchange="updateChildrenAges()">
        <div id="childrenAges" class="children-inputs"></div>
    </div>
    
    <div class="section">
        <label>Interests (select all that apply)</label>
        <div class="interests">
            <div class="interest-option">
                <input type="checkbox" id="art" value="art">
                <label for="art">Art & Museums</label>
            </div>
            <div class="interest-option">
                <input type="checkbox" id="architecture" value="architecture">
                <label for="architecture">Architecture</label>
            </div>
            <div class="interest-option">
                <input type="checkbox" id="photography" value="photography">
                <label for="photography">Photography</label>
            </div>
            <div class="interest-option">
                <input type="checkbox" id="sports" value="sports">
                <label for="sports">Sports</label>
            </div>
            <div class="interest-option">
                <input type="checkbox" id="history" value="history">
                <label for="history">History</label>
            </div>
            <div class="interest-option">
                <input type="checkbox" id="food" value="food" checked>
                <label for="food">Food & Drink</label>
            </div>
            <div class="interest-option">
                <input type="checkbox" id="nature" value="nature" checked>
                <label for="nature">Nature & Outdoors</label>
            </div>
            <div class="interest-option">
                <input type="checkbox" id="shopping" value="shopping">
                <label for="shopping">Shopping</label>
            </div>
            <div class="interest-option">
                <input type="checkbox" id="music" value="music">
                <label for="music">Music & Nightlife</label>
            </div>
        </div>
    </div>
    
    <button onclick="getRecommendations()">Get Destination Recommendations</button>
    
    <div class="loading">Generating personalized recommendations...</div>
    
    <div id="destinations" class="output"></div>
    
    <div id="itinerary" class="output"></div>
    
    <script>
        function updateChildrenAges() {
            const numChildren = parseInt(document.getElementById('children').value) || 0;
            const container = document.getElementById('childrenAges');
            container.innerHTML = '';
            
            if (numChildren > 0) {
                for (let i = 1; i <= numChildren; i++) {
                    const div = document.createElement('div');
                    div.className = 'child-age';
                    div.innerHTML = `Child ${i} age: <input type="number" class="child-age-input" min="0" max="17" value="10">`;
                    container.appendChild(div);
                }
            }
        }
        
        function getFormData() {
            const interests = [];
            document.querySelectorAll('.interest-option input:checked').forEach(cb => {
                interests.push(cb.value);
            });
            
            const childrenAges = [];
            document.querySelectorAll('.child-age-input').forEach(input => {
                childrenAges.push(parseInt(input.value));
            });
            
            return {
                origin: document.getElementById('origin').value,
                adults: parseInt(document.getElementById('adults').value),
                children: childrenAges,
                interests: interests
            };
        }
        
        async function getRecommendations() {
            const data = getFormData();
            
            if (!data.origin) {
                alert('Please enter your origin city');
                return;
            }
            
            if (data.interests.length === 0) {
                alert('Please select at least one interest');
                return;
            }
            
            document.querySelector('.loading').classList.add('active');
            document.getElementById('destinations').classList.remove('active');
            document.getElementById('itinerary').classList.remove('active');
            
            try {
                const response = await fetch('/api/recommendations', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });
                
                const result = await response.json();
                
                if (result.success) {
                    displayDestinations(result.destinations, data);
                } else {
                    alert('Error: ' + result.error);
                }
            } catch (error) {
                // For now, show mock data
                const mockDestinations = generateMockDestinations(data);
                displayDestinations(mockDestinations, data);
            } finally {
                document.querySelector('.loading').classList.remove('active');
            }
        }
        
        function generateMockDestinations(data) {
            // Mock data for testing UI
            const destinations = [
                {
                    name: "Asheville, NC",
                    distance: "7-hour drive",
                    travel: "Direct drive via I-77 S and I-26 S, or 1-stop flights daily",
                    why: "Perfect for nature lovers with Great Smoky Mountains access, plus incredible food scene with 15+ farm-to-table restaurants and craft breweries. The River Arts District offers photography opportunities.",
                    highlights: ["Biltmore Estate", "Blue Ridge Parkway", "River Arts District", "Curate tapas bar"]
                },
                {
                    name: "Washington, DC",
                    distance: "4.5-hour drive",
                    travel: "Direct drive via I-70 E and I-270 S, or hourly flights",
                    why: "Unmatched for history buffs with free Smithsonian museums, monuments, and architecture. Diverse food scene from food trucks to Michelin-starred restaurants.",
                    highlights: ["National Gallery of Art", "Lincoln Memorial", "Georgetown dining", "Rock Creek Park"]
                },
                {
                    name: "Chicago, IL",
                    distance: "1.5-hour flight",
                    travel: "Multiple daily direct flights from PIT, or 7-hour drive",
                    why: "Architecture capital with famous skyline, world-class museums, and legendary food scene from deep-dish pizza to fine dining. Great for photography along the riverfront.",
                    highlights: ["Art Institute", "Architecture boat tour", "Millennium Park", "West Loop restaurants"]
                }
            ];
            
            if (data.children.length > 0) {
                destinations.push({
                    name: "Williamsburg, VA",
                    distance: "5.5-hour drive",
                    travel: "Direct drive via I-70 E and I-95 S",
                    why: "Living history experience perfect for families, with Colonial Williamsburg and nearby Busch Gardens. Kid-friendly restaurants and hands-on historical activities.",
                    highlights: ["Colonial Williamsburg", "Busch Gardens", "Water Country USA", "Historic Jamestown"]
                });
            }
            
            return destinations;
        }
        
        function displayDestinations(destinations, formData) {
            const container = document.getElementById('destinations');
            let html = '<h2>Recommended Weekend Destinations</h2>';
            
            destinations.forEach((dest, index) => {
                html += `
                    <div class="destination-card">
                        <h3>${dest.name}</h3>
                        <p><strong>Travel:</strong> ${dest.distance} - ${dest.travel}</p>
                        <p><strong>Why it fits:</strong> ${dest.why}</p>
                        <p><strong>Highlights:</strong> ${dest.highlights.join(', ')}</p>
                        <button class="select-destination" onclick="selectDestination('${dest.name}', ${JSON.stringify(formData).replace(/"/g, '&quot;')})">
                            Select This Destination
                        </button>
                    </div>
                `;
            });
            
            container.innerHTML = html;
            container.classList.add('active');
        }
        
        async function selectDestination(destination, formData) {
            document.querySelector('.loading').textContent = `Generating detailed itinerary for ${destination}...`;
            document.querySelector('.loading').classList.add('active');
            document.getElementById('itinerary').classList.remove('active');
            
            // Mock itinerary for now
            setTimeout(() => {
                const itinerary = generateMockItinerary(destination, formData);
                displayItinerary(itinerary);
                document.querySelector('.loading').classList.remove('active');
            }, 1500);
        }
        
        function generateMockItinerary(destination, formData) {
            const hasKids = formData.children.length > 0;
            
            return {
                destination: destination,
                lodging: [
                    `The Restoration Hotel - Boutique property downtown, ${hasKids ? 'family suites available' : 'romantic atmosphere'}`,
                    `Hyatt Place - Modern, reliable, great breakfast included`,
                    `Airbnb in historic neighborhood - Full kitchen, more space ${hasKids ? 'for family' : ''}`
                ],
                friday: {
                    evening: `Arrive and check in. Dinner at [Local Favorite Restaurant] - known for [regional specialty]. ${hasKids ? 'Kid-friendly with good portions.' : 'Great cocktail menu.'} Walk around downtown to get oriented.`
                },
                saturday: {
                    morning: `Breakfast at [Beloved Breakfast Spot]. ${formData.interests.includes('nature') ? 'Head to [Nature Area] for morning hike - 2 miles, moderate difficulty.' : 'Visit [Main Museum/Attraction] when it opens at 9am to beat crowds.'}`,
                    afternoon: `Lunch in [Food District/Area] - try [Restaurant A] for [cuisine] or [Restaurant B] for casual [cuisine]. ${formData.interests.includes('art') ? 'Explore galleries in Arts District.' : 'Walking tour of historic downtown.'}`,
                    evening: `Dinner at [Upscale Restaurant] - make reservations. ${formData.interests.includes('music') ? 'Check out live music at [Venue].' : 'Evening stroll along [Scenic Area].'}`
                },
                sunday: {
                    morning: `${hasKids ? 'Family-friendly brunch' : 'Leisurely brunch'} at [Brunch Spot]. Visit [Sunday Market/Attraction].`,
                    afternoon: `Light lunch/snacks at [Casual Spot]. Last-minute shopping at [Shopping Area]. Depart by 3pm to get home by evening.`
                },
                dining_notes: `Food scene highlights: [Cuisine Type 1] in [Neighborhood A], [Cuisine Type 2] along [Street B]. ${hasKids ? 'Most restaurants accommodate children well, especially [Family Restaurants].' : 'Reservation recommended for dinner spots.'}`,
                tips: `Best photo ops at [Location]. ${formData.interests.includes('nature') ? 'Bring hiking boots.' : ''} Download parking apps for downtown. ${hasKids ? 'Many attractions offer family packages.' : ''}`
            };
        }
        
        function displayItinerary(itinerary) {
            const container = document.getElementById('itinerary');
            
            let html = `
<h2>Your Weekend Itinerary for ${itinerary.destination}</h2>

<strong>WHERE TO STAY</strong>
${itinerary.lodging.map(l => `• ${l}`).join('\n')}

<strong>FRIDAY</strong>
Evening: ${itinerary.friday.evening}

<strong>SATURDAY</strong>
Morning: ${itinerary.saturday.morning}
Afternoon: ${itinerary.saturday.afternoon}
Evening: ${itinerary.saturday.evening}

<strong>SUNDAY</strong>
Morning: ${itinerary.sunday.morning}
Afternoon: ${itinerary.sunday.afternoon}

<strong>DINING NOTES</strong>
${itinerary.dining_notes}

<strong>TIPS</strong>
${itinerary.tips}
            `;
            
            container.innerHTML = html;
            container.classList.add('active');
        }
    </script>
</body>
</html>